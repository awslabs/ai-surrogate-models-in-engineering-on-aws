<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3. Using Slice Prediction on new Geometry &#8212; AI Surrogate Models for Engineering on AWS 0.1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=9de7e953" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=06097142" />
    <script src="../_static/documentation_options.js?v=a58bc63e"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AhmedML Dataset" href="../datasets/ahmed.html" />
    <link rel="prev" title="2. Training Slice Prediction on the WindsorML Dataset" href="tutorial-slices-windsor-training.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="using-slice-prediction-on-new-geometry">
<span id="tutorial-slices-windsor-prediction"></span><h1><span class="section-number">3. </span>Using Slice Prediction on new Geometry<a class="headerlink" href="#using-slice-prediction-on-new-geometry" title="Link to this heading">¶</a></h1>
<p>This tutorial demonstrates how to use a trained model from the Slice prediction pipeline on the <a class="reference internal" href="../datasets/windsor.html#datasets-windsor"><span class="std std-ref">WindsorML Dataset</span></a> on new geometry.</p>
<p>If you haven’t yet completed the <a class="reference internal" href="tutorial-slices-windsor-training.html#tutorial-slices-windsor-training"><span class="std std-ref">training tutorial</span></a>, do so first to output a model ready for predictions.</p>
<section id="creating-the-manifest">
<h2><span class="section-number">3.1. </span>Creating the Manifest<a class="headerlink" href="#creating-the-manifest" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">run-create-manifest-prediction</span></code> script generates the required manifest for the WindsorML dataset. To create the manifest, run the script pointing to your dataset location:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run-create-manifest-prediction<span class="w"> </span>/path/to/windsor/dataset
</pre></div>
</div>
<p>This will generate one manifest</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">predict.manifest</span></code>: Lists geometry files for predicting the simulation variable</p></li>
</ul>
<p>You can customize the manifest to use different geometries by editing <code class="docutils literal notranslate"><span class="pre">run-create-manifest-prediction</span></code> script:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># Get a list of run folders for prediction (5 random runs) only</span>
<span class="nv">predict_run_folders</span><span class="o">=(</span><span class="k">$(</span>ls<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$dataset_prefix</span><span class="s2">/run_&quot;</span>*<span class="w"> </span><span class="p">|</span><span class="w"> </span>shuf<span class="w"> </span>-n<span class="w"> </span><span class="m">5</span><span class="k">)</span><span class="o">)</span>

<span class="c1"># Create predict.manifest with geometry-only, no image data</span>
mlsimkit-manifest<span class="w"> </span>create<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;prediction.manifest&quot;</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;name=geometry_files,file_glob=*.stl&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">predict_run_folders</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>A manifest is a JSON Lines (<code class="docutils literal notranslate"><span class="pre">.manifest</span></code>) file that lists the paths to the data files and their associated slice image files if applicable. Each line in the manifest represents a single data file entry, containing the following key:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;geometry_files&quot;</span></code>: A relative or absolute path to the geometry file (e.g., <code class="docutils literal notranslate"><span class="pre">.stl</span></code>)</p></li>
</ul>
<p>Here’s an example manifest entry:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;geometry_files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;file:///mnt/caemldatasets/windsor/dataset/run_99/windsor_99.stl&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This entry lists the path to a single geometry file (<code class="docutils literal notranslate"><span class="pre">windsor_99.stl</span></code>).  Note that <code class="docutils literal notranslate"><span class="pre">&quot;slices_uri&quot;</span></code> will not exist in this manifest which is intended as we are demostrating the case where we do not have ground truth.</p>
</section>
<section id="running-the-pipeline">
<h2><span class="section-number">3.2. </span>Running the Pipeline<a class="headerlink" href="#running-the-pipeline" title="Link to this heading">¶</a></h2>
<p>With the manifests created and configuration files in place, you can run the full Slice prediction pipeline using the provided scripts:</p>
<p>Run prediction:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run-prediction
</pre></div>
</div>
<p>This script executes the necessary command using the <code class="docutils literal notranslate"><span class="pre">prediction.yaml</span></code> configuration file.</p>
</section>
<section id="reviewing-results">
<h2><span class="section-number">3.3. </span>Reviewing Results<a class="headerlink" href="#reviewing-results" title="Link to this heading">¶</a></h2>
<section id="during-prediction">
<h3><span class="section-number">3.3.1. </span>During Prediction<a class="headerlink" href="#during-prediction" title="Link to this heading">¶</a></h3>
<p>The prediction step generates images showing the slice predictions made by the trained model for new, unseen geometries. These images are located in the <code class="docutils literal notranslate"><span class="pre">outputs/prediction/images/</span></code> directory.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*-prediction-*.png</span></code>: The predicted slice images from the trained model</p></li>
</ul>
<p>Since the prediction manifest contains only geometry files (no ground truth slice data), the prediction outputs do not include original or error images for comparison. However, you can visually inspect the predicted slices to ensure they match your expectations for the given geometry.</p>
<p>If you have access to the ground truth simulation data for the prediction geometries, you can modify the <code class="docutils literal notranslate"><span class="pre">predict.yaml</span></code> configuration to include a comparison against the ground truth. Set <code class="docutils literal notranslate"><span class="pre">slices.predict.compare-groundtruth:</span> <span class="pre">True</span></code> and provide the appropriate manifest with both geometry and slice data.</p>
</section>
</section>
<section id="configuration-files">
<h2><span class="section-number">3.4. </span>Configuration Files<a class="headerlink" href="#configuration-files" title="Link to this heading">¶</a></h2>
<p>The Slice prediction pipeline is configured using separate YAML files for training and prediction.  Below we show the prediction YAML file :</p>
<p><strong>prediction.yaml</strong></p>
<p>This file configures the prediction step, using the trained models from the training pipeline. Key settings include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">output-dir</span></code>: Directory for storing prediction outputs (images, metrics)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slices.preprocess.manifest-uri</span></code>: Path to the prediction data manifest</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slices.predict.ae-model-path</span></code>: Path to the trained image autoencoder model</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slices.predict.mgn-model-path</span></code>: Path to the trained prediction model</p></li>
</ul>
<p>To get an introduction to the available configuration options, use the <code class="docutils literal notranslate"><span class="pre">mlsimkit-learn</span> <span class="pre">slices</span> <span class="pre">--help</span></code> command and the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option for each sub-command such as <code class="docutils literal notranslate"><span class="pre">mlsimkit-learn</span> <span class="pre">slices</span> <span class="pre">predict</span> <span class="pre">--help</span></code>. This will provide an overview of the options and their purposes, which can be helpful when configuring the training and prediction pipelines.</p>
</section>
<section id="next-steps">
<h2><span class="section-number">3.5. </span>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">¶</a></h2>
<p>Dive into the <a class="reference internal" href="../user/user-guide-slice.html#user-guide-slices"><span class="std std-ref">Model User Guide – Slice Prediction</span></a> for detailed information on all configuration options and how they impact model training and performance.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><!--
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/mlsimkit-sidebar.png" alt="MLSimKit logo" />
  </a>
</p>
-->

<h4><a href="../index.html">AI Surrogate Models in Engineering on AWS</a></h4>
<p>
  Tools to develop and use ML predictive models as surrogates for physics-based simulations.
</p>

<h4>Useful Links</h4>
<ul>
  <li><a href="../user/install.html">Install</a></li>
  <li><a href="../user/quickstart-kpi.html">Quickstart KPI</a></li>
  <li><a href="../user/quickstart-slices.html">Quickstart Slices</a></li>
  <li><a href="../user/quickstart-surface.html">Quickstart Surfaces</a></li>
  <li><a href="../user/troubleshooting.html">Troubleshooting</a></li>
</ul>

<div id="native-ribbon">
</div>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/quickstart-kpi.html">Quickstart with KPI Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/quickstart-surface.html">Quickstart with Surface Variable Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/quickstart-slices.html">Quickstart with Slice Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/troubleshooting.html">Troubleshooting</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial-kpi-windsor.html">KPI Prediction Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial-surface-ahmed.html">Surface Variable Prediction Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial-slices-windsor.html">Slice Prediction Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial-slices-windsor-data-access.html">1. Downloading WindsorML data for Slice Prediction (48G)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial-slices-windsor-training.html">2. Training Slice Prediction on the WindsorML Dataset</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Using Slice Prediction on new Geometry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-the-manifest">3.1. Creating the Manifest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-pipeline">3.2. Running the Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reviewing-results">3.3. Reviewing Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-files">3.4. Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">3.5. Next Steps</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../datasets/ahmed.html">AhmedML Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets/windsor.html">WindsorML Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets/drivaer.html">DrivAerML Dataset</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/user-guide-kpi.html">Model User Guide – KPI Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/user-guide-surface.html">Model User Guide – Surface Variable Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/user-guide-slice.html">Model User Guide – Slice Prediction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/notebook-guide.html">Using the MLSimKit SDK Interactively (Notebooks, IPython)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/mlflow-guide.html">Tracking Experiments and Results with MLFLow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/guide.html">Code Structure and Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/learn.html">Learning Module (<code class="docutils literal notranslate"><span class="pre">mlsimkit.learn</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/cli-toolkit.html">Creating Custom CLI Commands</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/api.html">MLSimKit SDK API</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="tutorial-slices-windsor.html">Slice Prediction Tutorial</a><ul>
      <li>Previous: <a href="tutorial-slices-windsor-training.html" title="previous chapter"><span class="section-number">2. </span>Training Slice Prediction on the WindsorML Dataset</a></li>
      <li>Next: <a href="../datasets/ahmed.html" title="next chapter">AhmedML Dataset</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;Copyright 2025 Amazon.com, Inc. or its affiliates. All Rights Reserved..
      
      |
      <a href="../_sources/tutorials/tutorial-slices-windsor-prediction.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>